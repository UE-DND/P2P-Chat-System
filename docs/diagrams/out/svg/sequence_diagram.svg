<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="11260px" preserveAspectRatio="none" style="width:5934px;height:11260px;background:#FFFFFF;" version="1.1" viewBox="0 0 5934 11260" width="5934px" zoomAndPan="magnify"><title>P2P_Chat_System - &#26680;&#24515;&#21151;&#33021;&#26102;&#24207;&#22270;</title><defs/><g><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="470.9004" x="2723.8079" y="59.627">P2P_Chat_System - &#26680;&#24515;&#21151;&#33021;&#26102;&#24207;&#22270;</text><rect fill="#FFFFFF" height="1555.0117" style="stroke:#000000;stroke-width:2.0;" width="20" x="291.2144" y="405.1807"/><rect fill="#FFFFFF" height="64.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="886.8608" y="470.1357"/><rect fill="#FFFFFF" height="1360.1465" style="stroke:#000000;stroke-width:2.0;" width="20" x="1097.437" y="600.0459"/><rect fill="#FFFFFF" height="204.8652" style="stroke:#000000;stroke-width:2.0;" width="20" x="1107.437" y="1403.5967"/><rect fill="#FFFFFF" height="1175.1914" style="stroke:#000000;stroke-width:2.0;" width="20" x="1097.437" y="2183.0576"/><rect fill="#FFFFFF" height="2195.4277" style="stroke:#000000;stroke-width:2.0;" width="20" x="1097.437" y="3581.1143"/><rect fill="#FFFFFF" height="64.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="1566.8335" y="1257.6865"/><rect fill="#FFFFFF" height="64.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="1566.8335" y="1478.5518"/><rect fill="#FFFFFF" height="60" style="stroke:#000000;stroke-width:2.0;" width="20" x="1833.3296" y="885.8662"/><rect fill="#FFFFFF" height="129.9102" style="stroke:#000000;stroke-width:2.0;" width="20" x="1833.3296" y="2480.8779"/><rect fill="#FFFFFF" height="126.8652" style="stroke:#000000;stroke-width:2.0;" width="20" x="1833.3296" y="2675.7432"/><rect fill="#FFFFFF" height="60" style="stroke:#000000;stroke-width:2.0;" width="20" x="1833.3296" y="2867.5635"/><rect fill="#FFFFFF" height="126.8652" style="stroke:#000000;stroke-width:2.0;" width="20" x="1833.3296" y="4107.71"/><rect fill="#FFFFFF" height="60" style="stroke:#000000;stroke-width:2.0;" width="20" x="1833.3296" y="4677.2607"/><rect fill="#FFFFFF" height="126.8652" style="stroke:#000000;stroke-width:2.0;" width="20" x="1833.3296" y="4802.2158"/><rect fill="#FFFFFF" height="60" style="stroke:#000000;stroke-width:2.0;" width="20" x="1833.3296" y="5289.8564"/><rect fill="#FFFFFF" height="76.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="1833.3296" y="7165.6436"/><rect fill="#FFFFFF" height="60" style="stroke:#000000;stroke-width:2.0;" width="20" x="1833.3296" y="8671.7002"/><rect fill="#FFFFFF" height="60" style="stroke:#000000;stroke-width:2.0;" width="20" x="1833.3296" y="8887.6104"/><rect fill="#FFFFFF" height="64.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="1833.3296" y="9428.2959"/><rect fill="#FFFFFF" height="76.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="2086.0161" y="1010.8213"/><rect fill="#FFFFFF" height="64.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="2086.0161" y="6262.2725"/><rect fill="#FFFFFF" height="60" style="stroke:#000000;stroke-width:2.0;" width="20" x="2086.0161" y="7321.5537"/><rect fill="#FFFFFF" height="64.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="2551.8887" y="3785.9795"/><rect fill="#FFFFFF" height="64.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="2551.8887" y="3915.8896"/><rect fill="#FFFFFF" height="1758.7422" style="stroke:#000000;stroke-width:2.0;" width="20" x="3059.4883" y="3656.0693"/><rect fill="#FFFFFF" height="516.6855" style="stroke:#000000;stroke-width:2.0;" width="20" x="3069.4883" y="4602.3057"/><rect fill="#FFFFFF" height="60" style="stroke:#000000;stroke-width:2.0;" width="20" x="3670.7266" y="4994.0361"/><rect fill="#FFFFFF" height="76.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="3854.7886" y="5555.6768"/><rect fill="#FFFFFF" height="5368.6758" style="stroke:#000000;stroke-width:2.0;" width="20" x="3854.7886" y="5711.5869"/><rect fill="#FFFFFF" height="204.8652" style="stroke:#000000;stroke-width:2.0;" width="20" x="3864.7886" y="6187.3174"/><rect fill="#FFFFFF" height="512.6855" style="stroke:#000000;stroke-width:2.0;" width="20" x="3864.7886" y="6898.8682"/><rect fill="#FFFFFF" height="64.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="3864.7886" y="7618.4189"/><rect fill="#FFFFFF" height="418.6855" style="stroke:#000000;stroke-width:2.0;" width="20" x="3864.7886" y="7748.3291"/><rect fill="#FFFFFF" height="337.7305" style="stroke:#000000;stroke-width:2.0;" width="20" x="3874.7886" y="7829.2842"/><rect fill="#FFFFFF" height="2771.3379" style="stroke:#000000;stroke-width:2.0;" width="20" x="3864.7886" y="8308.9248"/><rect fill="#FFFFFF" height="687.6406" style="stroke:#000000;stroke-width:2.0;" width="20" x="3874.7886" y="8389.8799"/><rect fill="#FFFFFF" height="571.6406" style="stroke:#000000;stroke-width:2.0;" width="20" x="3874.7886" y="9207.4307"/><rect fill="#FFFFFF" height="490.6855" style="stroke:#000000;stroke-width:2.0;" width="20" x="3884.7886" y="9288.3857"/><rect fill="#FFFFFF" height="1143.2813" style="stroke:#000000;stroke-width:2.0;" width="20" x="3874.7886" y="9936.9814"/><rect fill="#FFFFFF" height="216.8652" style="stroke:#000000;stroke-width:2.0;" width="20" x="3884.7886" y="10017.9365"/><rect fill="#FFFFFF" height="74.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="3884.7886" y="10429.667"/><rect fill="#FFFFFF" height="220.8652" style="stroke:#000000;stroke-width:2.0;" width="20" x="3884.7886" y="10841.3975"/><rect fill="#FFFFFF" height="74.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="3894.7886" y="10922.3525"/><rect fill="#FFFFFF" height="141.9102" style="stroke:#000000;stroke-width:2.0;" width="20" x="4619.2046" y="6662.0029"/><rect fill="#FFFFFF" height="280.8652" style="stroke:#000000;stroke-width:2.0;" width="20" x="4619.2046" y="7100.6885"/><rect fill="#FFFFFF" height="129.9102" style="stroke:#000000;stroke-width:2.0;" width="20" x="4619.2046" y="7553.4639"/><rect fill="#FFFFFF" height="636.5957" style="stroke:#000000;stroke-width:2.0;" width="20" x="4619.2046" y="9142.4756"/><rect fill="#FFFFFF" height="285.8203" style="stroke:#000000;stroke-width:2.0;" width="20" x="4619.2046" y="10776.4424"/><rect fill="#FFFFFF" height="470.7754" style="stroke:#000000;stroke-width:2.0;" width="20" x="4967.2046" y="8606.7451"/><rect fill="#FFFFFF" height="350.7754" style="stroke:#000000;stroke-width:2.0;" width="20" x="4967.2046" y="9363.3408"/><rect fill="#FFFFFF" height="64.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="5329.8608" y="7966.1494"/><rect fill="#FFFFFF" height="612.6855" style="stroke:#000000;stroke-width:2.0;" width="20" x="5528.7319" y="8464.835"/><rect fill="#FFFFFF" height="141.9102" style="stroke:#000000;stroke-width:2.0;" width="20" x="5749.6421" y="10092.8916"/><rect fill="none" height="242.7754" rx="10" ry="10" style="stroke:#000000;stroke-width:3.0;" width="2405.5342" x="60" y="1703.417"/><rect fill="none" height="230.7754" rx="10" ry="10" style="stroke:#000000;stroke-width:3.0;" width="1926.4268" x="60" y="3113.4736"/><rect fill="none" height="385.6406" rx="10" ry="10" style="stroke:#000000;stroke-width:3.0;" width="1577.6758" x="1680.2324" y="4137.71"/><rect fill="none" height="244.7754" rx="10" ry="10" style="stroke:#000000;stroke-width:3.0;" width="1537.6758" x="1700.2324" y="4264.5752"/><rect fill="none" height="598.5957" rx="10" ry="10" style="stroke:#000000;stroke-width:3.0;" width="2779.8906" x="995.5195" y="4832.2158"/><rect fill="none" height="465.6406" rx="10" ry="10" style="stroke:#000000;stroke-width:3.0;" width="3541.1655" x="995.5195" y="5458.8115"/><rect fill="none" height="458.6855" rx="10" ry="10" style="stroke:#000000;stroke-width:3.0;" width="4702.2153" x="60" y="6938.8682"/><rect fill="none" height="283.7305" rx="10" ry="10" style="stroke:#000000;stroke-width:3.0;" width="5378.6958" x="60" y="7869.2842"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="112" x2="112" y1="243.2705" y2="11098.2627"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="300" x2="300" y1="243.2705" y2="11098.2627"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="896.2021" x2="896.2021" y1="243.2705" y2="11098.2627"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1105.5195" x2="1105.5195" y1="243.2705" y2="11098.2627"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1575.9897" x2="1575.9897" y1="243.2705" y2="11098.2627"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1842.2324" x2="1842.2324" y1="243.2705" y2="11098.2627"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2094.4268" x2="2094.4268" y1="243.2705" y2="11098.2627"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2348.9199" x2="2348.9199" y1="243.2705" y2="11098.2627"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="2561.5342" x2="2561.5342" y1="243.2705" y2="11098.2627"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="3068.667" x2="3068.667" y1="243.2705" y2="11098.2627"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="3510.6758" x2="3510.6758" y1="243.2705" y2="11098.2627"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="3680.043" x2="3680.043" y1="243.2705" y2="11098.2627"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="3863.4102" x2="3863.4102" y1="243.2705" y2="11098.2627"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="4628.1938" x2="4628.1938" y1="243.2705" y2="11098.2627"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="4975.5059" x2="4975.5059" y1="243.2705" y2="11098.2627"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="5339.0259" x2="5339.0259" y1="243.2705" y2="11098.2627"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="5538.6958" x2="5538.6958" y1="243.2705" y2="11098.2627"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="5758.7681" x2="5758.7681" y1="243.2705" y2="11098.2627"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="52" x="80" y="236.4658">&#29992;&#25143;</text><ellipse cx="112" cy="105.9551" fill="#E2E2F0" rx="16" ry="16" style="stroke:#181818;stroke-width:1.0;"/><path d="M112,121.9551 L112,175.9551 M86,137.9551 L138,137.9551 M112,175.9551 L86,205.9551 M112,175.9551 L138,205.9551 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="52" x="80" y="11123.7734">&#29992;&#25143;</text><ellipse cx="112" cy="11147.5781" fill="#E2E2F0" rx="16" ry="16" style="stroke:#181818;stroke-width:1.0;"/><path d="M112,11163.5781 L112,11217.5781 M86,11179.5781 L138,11179.5781 M112,11217.5781 L86,11247.5781 M112,11217.5781 L138,11247.5781 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="274.4287" x="164" y="178.9551"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="246.4287" x="178" y="220.4658">P2PChatApplication</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="274.4287" x="164" y="11096.2627"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="246.4287" x="178" y="11137.7734">P2PChatApplication</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="197.3174" x="798.2021" y="178.9551"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="169.3174" x="812.2021" y="220.4658">DirectoryUtils</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="197.3174" x="798.2021" y="11096.2627"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="169.3174" x="812.2021" y="11137.7734">DirectoryUtils</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="183.835" x="1015.5195" y="178.9551"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="155.835" x="1029.5195" y="220.4658">CliController</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="183.835" x="1015.5195" y="11096.2627"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="155.835" x="1029.5195" y="11137.7734">CliController</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="189.6875" x="1481.9897" y="178.9551"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="161.6875" x="1495.9897" y="220.4658">NetworkUtils</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="189.6875" x="1481.9897" y="11096.2627"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="161.6875" x="1495.9897" y="11137.7734">NetworkUtils</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="246.1943" x="1720.2324" y="178.9551"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="218.1943" x="1734.2324" y="220.4658">NetworkManager</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="246.1943" x="1720.2324" y="11096.2627"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="218.1943" x="1734.2324" y="11137.7734">NetworkManager</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="219.1787" x="1986.4268" y="178.9551"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="191.1787" x="2000.4268" y="220.4658">ChatRepository</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="219.1787" x="1986.4268" y="11096.2627"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="191.1787" x="2000.4268" y="11137.7734">ChatRepository</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="190.6143" x="2254.9199" y="178.9551"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="162.6143" x="2268.9199" y="220.4658">MenuDisplay</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="190.6143" x="2254.9199" y="11096.2627"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="162.6143" x="2268.9199" y="11137.7734">MenuDisplay</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="192.709" x="2465.5342" y="178.9551"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="164.709" x="2479.5342" y="220.4658">InputHandler</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="192.709" x="2465.5342" y="11096.2627"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="164.709" x="2479.5342" y="11137.7734">InputHandler</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="269.6426" x="2934.667" y="178.9551"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="241.6426" x="2948.667" y="220.4658">ConnectionHandler</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="269.6426" x="2934.667" y="11096.2627"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="241.6426" x="2948.667" y="11137.7734">ConnectionHandler</text><rect fill="#FFFFFF" height="96.6309" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="149.3672" x="3436.6758" y="144.6396"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="56.126" x="3483.2964" y="186.1504">User</text><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="121.3672" x="3450.6758" y="220.4658">(&#26412;&#22320;&#29992;&#25143;)</text><rect fill="#FFFFFF" height="96.6309" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="149.3672" x="3436.6758" y="11096.2627"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="56.126" x="3483.2964" y="11137.7734">User</text><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="121.3672" x="3450.6758" y="11172.0889">(&#26412;&#22320;&#29992;&#25143;)</text><rect fill="#FFFFFF" height="96.6309" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="149.3672" x="3606.043" y="144.6396"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="56.126" x="3652.6636" y="186.1504">User</text><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="121.3672" x="3620.043" y="220.4658">(&#36828;&#31243;&#29992;&#25143;)</text><rect fill="#FFFFFF" height="96.6309" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="149.3672" x="3606.043" y="11096.2627"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="56.126" x="3652.6636" y="11137.7734">User</text><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="121.3672" x="3620.043" y="11172.0889">(&#36828;&#31243;&#29992;&#25143;)</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="178.7568" x="3775.4102" y="178.9551"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="150.7568" x="3789.4102" y="220.4658">ChatSession</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="178.7568" x="3775.4102" y="11096.2627"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="150.7568" x="3789.4102" y="11137.7734">ChatSession</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="226.0215" x="4516.1938" y="178.9551"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="198.0215" x="4530.1938" y="220.4658">MessageService</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="226.0215" x="4516.1938" y="11096.2627"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="198.0215" x="4530.1938" y="11137.7734">MessageService</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="259.3975" x="4847.5059" y="178.9551"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="231.3975" x="4861.5059" y="220.4658">FileTransferService</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="259.3975" x="4847.5059" y="11096.2627"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="231.3975" x="4861.5059" y="11137.7734">FileTransferService</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="157.6699" x="5261.0259" y="178.9551"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="129.6699" x="5275.0259" y="220.4658">Command</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="157.6699" x="5261.0259" y="11096.2627"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="129.6699" x="5275.0259" y="11137.7734">Command</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="200.0723" x="5438.6958" y="178.9551"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="172.0723" x="5452.6958" y="220.4658">FileCommand</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="200.0723" x="5438.6958" y="11096.2627"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="172.0723" x="5452.6958" y="11137.7734">FileCommand</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="201.748" x="5658.7681" y="178.9551"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="173.748" x="5672.7681" y="220.4658">ExitCommand</text><rect fill="#FFFFFF" height="62.3154" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;" width="201.748" x="5658.7681" y="11096.2627"/><text fill="#000000" font-family="Microsoft YaHei" font-size="26" lengthAdjust="spacing" textLength="173.748" x="5672.7681" y="11137.7734">ExitCommand</text><rect fill="#FFFFFF" height="1555.0117" style="stroke:#000000;stroke-width:2.0;" width="20" x="291.2144" y="405.1807"/><rect fill="#FFFFFF" height="64.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="886.8608" y="470.1357"/><rect fill="#FFFFFF" height="1360.1465" style="stroke:#000000;stroke-width:2.0;" width="20" x="1097.437" y="600.0459"/><rect fill="#FFFFFF" height="204.8652" style="stroke:#000000;stroke-width:2.0;" width="20" x="1107.437" y="1403.5967"/><rect fill="#FFFFFF" height="1175.1914" style="stroke:#000000;stroke-width:2.0;" width="20" x="1097.437" y="2183.0576"/><rect fill="#FFFFFF" height="2195.4277" style="stroke:#000000;stroke-width:2.0;" width="20" x="1097.437" y="3581.1143"/><rect fill="#FFFFFF" height="64.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="1566.8335" y="1257.6865"/><rect fill="#FFFFFF" height="64.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="1566.8335" y="1478.5518"/><rect fill="#FFFFFF" height="60" style="stroke:#000000;stroke-width:2.0;" width="20" x="1833.3296" y="885.8662"/><rect fill="#FFFFFF" height="129.9102" style="stroke:#000000;stroke-width:2.0;" width="20" x="1833.3296" y="2480.8779"/><rect fill="#FFFFFF" height="126.8652" style="stroke:#000000;stroke-width:2.0;" width="20" x="1833.3296" y="2675.7432"/><rect fill="#FFFFFF" height="60" style="stroke:#000000;stroke-width:2.0;" width="20" x="1833.3296" y="2867.5635"/><rect fill="#FFFFFF" height="126.8652" style="stroke:#000000;stroke-width:2.0;" width="20" x="1833.3296" y="4107.71"/><rect fill="#FFFFFF" height="60" style="stroke:#000000;stroke-width:2.0;" width="20" x="1833.3296" y="4677.2607"/><rect fill="#FFFFFF" height="126.8652" style="stroke:#000000;stroke-width:2.0;" width="20" x="1833.3296" y="4802.2158"/><rect fill="#FFFFFF" height="60" style="stroke:#000000;stroke-width:2.0;" width="20" x="1833.3296" y="5289.8564"/><rect fill="#FFFFFF" height="76.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="1833.3296" y="7165.6436"/><rect fill="#FFFFFF" height="60" style="stroke:#000000;stroke-width:2.0;" width="20" x="1833.3296" y="8671.7002"/><rect fill="#FFFFFF" height="60" style="stroke:#000000;stroke-width:2.0;" width="20" x="1833.3296" y="8887.6104"/><rect fill="#FFFFFF" height="64.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="1833.3296" y="9428.2959"/><rect fill="#FFFFFF" height="76.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="2086.0161" y="1010.8213"/><rect fill="#FFFFFF" height="64.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="2086.0161" y="6262.2725"/><rect fill="#FFFFFF" height="60" style="stroke:#000000;stroke-width:2.0;" width="20" x="2086.0161" y="7321.5537"/><rect fill="#FFFFFF" height="64.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="2551.8887" y="3785.9795"/><rect fill="#FFFFFF" height="64.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="2551.8887" y="3915.8896"/><rect fill="#FFFFFF" height="1758.7422" style="stroke:#000000;stroke-width:2.0;" width="20" x="3059.4883" y="3656.0693"/><rect fill="#FFFFFF" height="516.6855" style="stroke:#000000;stroke-width:2.0;" width="20" x="3069.4883" y="4602.3057"/><rect fill="#FFFFFF" height="60" style="stroke:#000000;stroke-width:2.0;" width="20" x="3670.7266" y="4994.0361"/><rect fill="#FFFFFF" height="76.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="3854.7886" y="5555.6768"/><rect fill="#FFFFFF" height="5368.6758" style="stroke:#000000;stroke-width:2.0;" width="20" x="3854.7886" y="5711.5869"/><rect fill="#FFFFFF" height="204.8652" style="stroke:#000000;stroke-width:2.0;" width="20" x="3864.7886" y="6187.3174"/><rect fill="#FFFFFF" height="512.6855" style="stroke:#000000;stroke-width:2.0;" width="20" x="3864.7886" y="6898.8682"/><rect fill="#FFFFFF" height="64.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="3864.7886" y="7618.4189"/><rect fill="#FFFFFF" height="418.6855" style="stroke:#000000;stroke-width:2.0;" width="20" x="3864.7886" y="7748.3291"/><rect fill="#FFFFFF" height="337.7305" style="stroke:#000000;stroke-width:2.0;" width="20" x="3874.7886" y="7829.2842"/><rect fill="#FFFFFF" height="2771.3379" style="stroke:#000000;stroke-width:2.0;" width="20" x="3864.7886" y="8308.9248"/><rect fill="#FFFFFF" height="687.6406" style="stroke:#000000;stroke-width:2.0;" width="20" x="3874.7886" y="8389.8799"/><rect fill="#FFFFFF" height="571.6406" style="stroke:#000000;stroke-width:2.0;" width="20" x="3874.7886" y="9207.4307"/><rect fill="#FFFFFF" height="490.6855" style="stroke:#000000;stroke-width:2.0;" width="20" x="3884.7886" y="9288.3857"/><rect fill="#FFFFFF" height="1143.2813" style="stroke:#000000;stroke-width:2.0;" width="20" x="3874.7886" y="9936.9814"/><rect fill="#FFFFFF" height="216.8652" style="stroke:#000000;stroke-width:2.0;" width="20" x="3884.7886" y="10017.9365"/><rect fill="#FFFFFF" height="74.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="3884.7886" y="10429.667"/><rect fill="#FFFFFF" height="220.8652" style="stroke:#000000;stroke-width:2.0;" width="20" x="3884.7886" y="10841.3975"/><rect fill="#FFFFFF" height="74.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="3894.7886" y="10922.3525"/><rect fill="#FFFFFF" height="141.9102" style="stroke:#000000;stroke-width:2.0;" width="20" x="4619.2046" y="6662.0029"/><rect fill="#FFFFFF" height="280.8652" style="stroke:#000000;stroke-width:2.0;" width="20" x="4619.2046" y="7100.6885"/><rect fill="#FFFFFF" height="129.9102" style="stroke:#000000;stroke-width:2.0;" width="20" x="4619.2046" y="7553.4639"/><rect fill="#FFFFFF" height="636.5957" style="stroke:#000000;stroke-width:2.0;" width="20" x="4619.2046" y="9142.4756"/><rect fill="#FFFFFF" height="285.8203" style="stroke:#000000;stroke-width:2.0;" width="20" x="4619.2046" y="10776.4424"/><rect fill="#FFFFFF" height="470.7754" style="stroke:#000000;stroke-width:2.0;" width="20" x="4967.2046" y="8606.7451"/><rect fill="#FFFFFF" height="350.7754" style="stroke:#000000;stroke-width:2.0;" width="20" x="4967.2046" y="9363.3408"/><rect fill="#FFFFFF" height="64.9551" style="stroke:#000000;stroke-width:2.0;" width="20" x="5329.8608" y="7966.1494"/><rect fill="#FFFFFF" height="612.6855" style="stroke:#000000;stroke-width:2.0;" width="20" x="5528.7319" y="8464.835"/><rect fill="#FFFFFF" height="141.9102" style="stroke:#000000;stroke-width:2.0;" width="20" x="5749.6421" y="10092.8916"/><rect fill="#EEEEEE" height="6" rx="10" ry="10" style="stroke:#EEEEEE;stroke-width:2.0;" width="5920.5161" x="0" y="307.748"/><line style="stroke:#000000;stroke-width:2.0;" x1="0" x2="5920.5161" y1="307.748" y2="307.748"/><line style="stroke:#000000;stroke-width:2.0;" x1="0" x2="5920.5161" y1="313.748" y2="313.748"/><rect fill="#EEEEEE" height="52.9551" rx="10" ry="10" style="stroke:#000000;stroke-width:4.0;" width="209.9453" x="2855.2854" y="283.2705"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="173.6055" x="2867.2854" y="320.8975">1. &#31995;&#32479;&#21021;&#22987;&#21270;</text><polygon fill="#000000" points="267.2144,397.1807,287.2144,405.1807,267.2144,413.1807,275.2144,405.1807" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="112" x2="279.2144" y1="405.1807" y2="405.1807"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="112" x="126" y="393.8525">&#21551;&#21160;&#24212;&#29992;</text><polygon fill="#000000" points="862.8608,462.1357,882.8608,470.1357,862.8608,478.1357,870.8608,470.1357" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="311.2144" x2="874.8608" y1="470.1357" y2="470.1357"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="537.6465" x="325.2144" y="458.8076">createDirectoryIfNotExists("downloads")</text><polygon fill="#000000" points="333.2144,527.0908,313.2144,535.0908,333.2144,543.0908,325.2144,535.0908" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="321.2144" x2="894.8608" y1="535.0908" y2="535.0908"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="112" x="345.2144" y="523.7627">&#36820;&#22238;&#32467;&#26524;</text><polygon fill="#000000" points="1073.437,592.0459,1093.437,600.0459,1073.437,608.0459,1081.437,600.0459" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="311.2144" x2="1085.437" y1="600.0459" y2="600.0459"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="270.2793" x="325.2144" y="588.7178">new CliController(...)</text><line style="stroke:#000000;stroke-width:2.0;" x1="1117.437" x2="1201.437" y1="665.001" y2="665.001"/><line style="stroke:#000000;stroke-width:2.0;" x1="1201.437" x2="1201.437" y1="665.001" y2="691.001"/><line style="stroke:#000000;stroke-width:2.0;" x1="1119.437" x2="1201.437" y1="691.001" y2="691.001"/><polygon fill="#000000" points="1139.437,683.001,1119.437,691.001,1139.437,699.001,1131.437,691.001" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="249.0332" x="1131.437" y="653.6729">getPortFromUser()</text><polygon fill="#000000" points="134,747.9561,114,755.9561,134,763.9561,126,755.9561" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="122" x2="1095.437" y1="755.9561" y2="755.9561"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="168" x="146" y="744.6279">&#25552;&#31034;&#36755;&#20837;&#31471;&#21475;</text><polygon fill="#000000" points="1073.437,812.9111,1093.437,820.9111,1073.437,828.9111,1081.437,820.9111" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="112" x2="1085.437" y1="820.9111" y2="820.9111"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="140" x="126" y="809.583">&#36755;&#20837;&#31471;&#21475;&#21495;</text><polygon fill="#000000" points="1809.3296,877.8662,1829.3296,885.8662,1809.3296,893.8662,1817.3296,885.8662" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1117.437" x2="1821.3296" y1="885.8662" y2="885.8662"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="374.0215" x="1131.437" y="874.5381">new NetworkManager(port)</text><polygon fill="#000000" points="2062.0161,1002.8213,2082.0161,1010.8213,2062.0161,1018.8213,2070.0161,1010.8213" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1117.437" x2="2074.0161" y1="1010.8213" y2="1010.8213"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="400.0254" x="1131.437" y="999.4932">new ChatRepository(sql_path)</text><line style="stroke:#000000;stroke-width:2.0;" x1="2106.0161" x2="2190.0161" y1="1085.7764" y2="1085.7764"/><line style="stroke:#000000;stroke-width:2.0;" x1="2190.0161" x2="2190.0161" y1="1085.7764" y2="1111.7764"/><line style="stroke:#000000;stroke-width:2.0;" x1="2096.0161" x2="2190.0161" y1="1111.7764" y2="1111.7764"/><polygon fill="#000000" points="2116.0161,1103.7764,2096.0161,1111.7764,2116.0161,1119.7764,2108.0161,1111.7764" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="186.2109" x="2120.0161" y="1074.4482">initDatabase()</text><line style="stroke:#000000;stroke-width:2.0;" x1="1117.437" x2="1201.437" y1="1166.7314" y2="1166.7314"/><line style="stroke:#000000;stroke-width:2.0;" x1="1201.437" x2="1201.437" y1="1166.7314" y2="1192.7314"/><line style="stroke:#000000;stroke-width:2.0;" x1="1119.437" x2="1201.437" y1="1192.7314" y2="1192.7314"/><polygon fill="#000000" points="1139.437,1184.7314,1119.437,1192.7314,1139.437,1200.7314,1131.437,1192.7314" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="326.5801" x="1131.437" y="1155.4033">getLocalHostname(port)</text><polygon fill="#000000" points="1542.8335,1249.6865,1562.8335,1257.6865,1542.8335,1265.6865,1550.8335,1257.6865" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1117.437" x2="1554.8335" y1="1257.6865" y2="1257.6865"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="200.6348" x="1131.437" y="1246.3584">getHostname()</text><polygon fill="#000000" points="1139.437,1314.6416,1119.437,1322.6416,1139.437,1330.6416,1131.437,1322.6416" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="1127.437" x2="1574.8335" y1="1322.6416" y2="1322.6416"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="140" x="1151.437" y="1311.3135">&#36820;&#22238;&#20027;&#26426;&#21517;</text><line style="stroke:#000000;stroke-width:2.0;" x1="1117.437" x2="1211.437" y1="1377.5967" y2="1377.5967"/><line style="stroke:#000000;stroke-width:2.0;" x1="1211.437" x2="1211.437" y1="1377.5967" y2="1403.5967"/><line style="stroke:#000000;stroke-width:2.0;" x1="1129.437" x2="1211.437" y1="1403.5967" y2="1403.5967"/><polygon fill="#000000" points="1149.437,1395.5967,1129.437,1403.5967,1149.437,1411.5967,1141.437,1403.5967" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="355.9883" x="1141.437" y="1366.2686">setupLocalUser(hostname)</text><polygon fill="#000000" points="1542.8335,1470.5518,1562.8335,1478.5518,1542.8335,1486.5518,1550.8335,1478.5518" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1127.437" x2="1554.8335" y1="1478.5518" y2="1478.5518"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="266.2051" x="1141.437" y="1467.2236">getLocalIpAddress()</text><polygon fill="#000000" points="1149.437,1535.5068,1129.437,1543.5068,1149.437,1551.5068,1141.437,1543.5068" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="1137.437" x2="1574.8335" y1="1543.5068" y2="1543.5068"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="137.3613" x="1161.437" y="1532.1787">&#36820;&#22238;IP&#22320;&#22336;</text><polygon fill="#000000" points="3487.3594,1600.4619,3507.3594,1608.4619,3487.3594,1616.4619,3495.3594,1608.4619" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1117.437" x2="3499.3594" y1="1608.4619" y2="1608.4619"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="388.1582" x="1131.437" y="1597.1338">new User(hostname, ip, port)</text><polygon fill="#000000" points="2072.0161,1665.417,2092.0161,1673.417,2072.0161,1681.417,2080.0161,1673.417" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1117.437" x2="2084.0161" y1="1673.417" y2="1673.417"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="260.832" x="1131.437" y="1662.0889">saveUser(localUser)</text><path d="M70,1703.417 L213.7383,1703.417 L213.7383,1724.3721 L193.7383,1744.3721 L60,1744.3721 L60,1713.417 A10,10 0 0 1 70,1703.417 " fill="#EEEEEE" style="stroke:#000000;stroke-width:3.0;"/><rect fill="none" height="242.7754" rx="10" ry="10" style="stroke:#000000;stroke-width:3.0;" width="2405.5342" x="60" y="1703.417"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="63.7383" x="90" y="1735.0439">loop</text><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="161.8203" x="243.7383" y="1737.0439">[&#20027;&#33756;&#21333;&#24490;&#29615;]</text><polygon fill="#000000" points="2326.2271,1792.2822,2346.2271,1800.2822,2326.2271,1808.2822,2334.2271,1800.2822" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1117.437" x2="2338.2271" y1="1800.2822" y2="1800.2822"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="140" x="1131.437" y="1788.9541">&#26174;&#31034;&#20027;&#33756;&#21333;</text><polygon fill="#000000" points="134,1857.2373,114,1865.2373,134,1873.2373,126,1865.2373" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="122" x2="1095.437" y1="1865.2373" y2="1865.2373"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="449.0391" x="146" y="1853.9092">&#25552;&#31034;&#36873;&#25321;&#27169;&#24335; (1.&#21457;&#36865; 2.&#25509;&#25910; 3.&#36864;&#20986;)</text><polygon fill="#000000" points="1073.437,1922.1924,1093.437,1930.1924,1073.437,1938.1924,1081.437,1930.1924" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="112" x2="1085.437" y1="1930.1924" y2="1930.1924"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="112" x="126" y="1918.8643">&#36755;&#20837;&#36873;&#25321;</text><rect fill="#EEEEEE" height="6" rx="10" ry="10" style="stroke:#EEEEEE;stroke-width:2.0;" width="5920.5161" x="0" y="2004.6699"/><line style="stroke:#000000;stroke-width:2.0;" x1="0" x2="5920.5161" y1="2004.6699" y2="2004.6699"/><line style="stroke:#000000;stroke-width:2.0;" x1="0" x2="5920.5161" y1="2010.6699" y2="2010.6699"/><rect fill="#EEEEEE" height="52.9551" rx="10" ry="10" style="stroke:#000000;stroke-width:4.0;" width="254.1191" x="2833.1985" y="1980.1924"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="217.7793" x="2845.1985" y="2017.8193">2a. &#25509;&#25910;&#27169;&#24335;&#36873;&#25321;</text><polygon fill="#000000" points="1083.437,2094.1025,1103.437,2102.1025,1083.437,2110.1025,1091.437,2102.1025" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="112" x2="1095.437" y1="2102.1025" y2="2102.1025"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="244.084" x="126" y="2090.7744">&#36873;&#25321; "2" (&#25509;&#25910;&#27169;&#24335;)</text><line style="stroke:#000000;stroke-width:2.0;" x1="1107.437" x2="1201.437" y1="2157.0576" y2="2157.0576"/><line style="stroke:#000000;stroke-width:2.0;" x1="1201.437" x2="1201.437" y1="2157.0576" y2="2183.0576"/><line style="stroke:#000000;stroke-width:2.0;" x1="1119.437" x2="1201.437" y1="2183.0576" y2="2183.0576"/><polygon fill="#000000" points="1139.437,2175.0576,1119.437,2183.0576,1139.437,2191.0576,1131.437,2183.0576" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="192.1992" x="1131.437" y="2145.7295">receiveMode()</text><polygon fill="#000000" points="2326.2271,2250.0127,2346.2271,2258.0127,2326.2271,2266.0127,2334.2271,2258.0127" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1117.437" x2="2338.2271" y1="2258.0127" y2="2258.0127"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="374.9512" x="1131.437" y="2246.6846">&#26174;&#31034;&#25509;&#25910;&#27169;&#24335;&#33756;&#21333; (&#31561;&#24453;/&#36820;&#22238;)</text><polygon fill="#000000" points="1073.437,2314.9678,1093.437,2322.9678,1073.437,2330.9678,1081.437,2322.9678" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="112" x2="1085.437" y1="2322.9678" y2="2322.9678"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="244.084" x="126" y="2311.6396">&#36873;&#25321; "1" (&#31561;&#24453;&#36830;&#25509;)</text><rect fill="#EEEEEE" height="6" rx="10" ry="10" style="stroke:#EEEEEE;stroke-width:2.0;" width="5920.5161" x="0" y="2383.4453"/><line style="stroke:#000000;stroke-width:2.0;" x1="0" x2="5920.5161" y1="2383.4453" y2="2383.4453"/><line style="stroke:#000000;stroke-width:2.0;" x1="0" x2="5920.5161" y1="2389.4453" y2="2389.4453"/><rect fill="#EEEEEE" height="52.9551" rx="10" ry="10" style="stroke:#000000;stroke-width:4.0;" width="426.7539" x="2746.8811" y="2358.9678"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="390.4141" x="2758.8811" y="2396.5947">2b. &#31561;&#24453;&#36830;&#25509;&#19982;&#25569;&#25163; (&#25509;&#25910;&#27169;&#24335;)</text><polygon fill="#000000" points="1809.3296,2472.8779,1829.3296,2480.8779,1809.3296,2488.8779,1817.3296,2480.8779" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1117.437" x2="1821.3296" y1="2480.8779" y2="2480.8779"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="268.2012" x="1131.437" y="2469.5498">startServer(timeout)</text><polygon fill="#000000" points="1809.3296,2537.833,1829.3296,2545.833,1809.3296,2553.833,1817.3296,2545.833" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1117.437" x2="1821.3296" y1="2545.833" y2="2545.833"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="271.4414" x="1131.437" y="2534.5049">waitForConnection()</text><polygon fill="#000000" points="1139.437,2602.7881,1119.437,2610.7881,1139.437,2618.7881,1131.437,2610.7881" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="1127.437" x2="1841.3296" y1="2610.7881" y2="2610.7881"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="168" x="1151.437" y="2599.46">&#23458;&#25143;&#31471;&#24050;&#36830;&#25509;</text><polygon fill="#000000" points="1809.3296,2667.7432,1829.3296,2675.7432,1809.3296,2683.7432,1817.3296,2675.7432" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1117.437" x2="1821.3296" y1="2675.7432" y2="2675.7432"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="380.7891" x="1131.437" y="2664.415">receiveHandshakeMessage()</text><polygon fill="#000000" points="1139.437,2794.6084,1119.437,2802.6084,1139.437,2810.6084,1131.437,2802.6084" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="1127.437" x2="1841.3296" y1="2802.6084" y2="2802.6084"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="196" x="1151.437" y="2791.2803">&#36820;&#22238;&#23545;&#26041;&#29992;&#25143;&#21517;</text><polygon fill="#000000" points="1809.3296,2859.5635,1829.3296,2867.5635,1809.3296,2875.5635,1817.3296,2867.5635" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1117.437" x2="1821.3296" y1="2867.5635" y2="2867.5635"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="677.8926" x="1131.437" y="2856.2354">sendHandshakeMessage(localUser.getUsername())</text><polygon fill="#000000" points="3656.7266,2984.5186,3676.7266,2992.5186,3656.7266,3000.5186,3664.7266,2992.5186" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1117.437" x2="3668.7266" y1="2992.5186" y2="2992.5186"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="386.5176" x="1131.437" y="2981.1904">new User(username, ip, port)</text><line style="stroke:#000000;stroke-width:2.0;" x1="1117.437" x2="1201.437" y1="3057.4736" y2="3057.4736"/><line style="stroke:#000000;stroke-width:2.0;" x1="1201.437" x2="1201.437" y1="3057.4736" y2="3083.4736"/><line style="stroke:#000000;stroke-width:2.0;" x1="1119.437" x2="1201.437" y1="3083.4736" y2="3083.4736"/><polygon fill="#000000" points="1139.437,3075.4736,1119.437,3083.4736,1139.437,3091.4736,1131.437,3083.4736" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="226.6387" x="1131.437" y="3046.1455">&#21019;&#24314; ChatSession</text><path d="M70,3113.4736 L229.6797,3113.4736 L229.6797,3134.4287 L209.6797,3154.4287 L60,3154.4287 L60,3123.4736 A10,10 0 0 1 70,3113.4736 " fill="#EEEEEE" style="stroke:#000000;stroke-width:3.0;"/><rect fill="none" height="230.7754" rx="10" ry="10" style="stroke:#000000;stroke-width:3.0;" width="1926.4268" x="60" y="3113.4736"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="79.6797" x="90" y="3145.1006">break</text><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="189.8203" x="259.6797" y="3147.1006">[&#36827;&#20837;&#32842;&#22825;&#20250;&#35805;]</text><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="60" x2="1986.4268" y1="3163.3838" y2="3163.3838"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="331.9805" x="70" y="3193.0107">[&#25569;&#25163;&#22833;&#36133; (&#36229;&#26102;&#25110;&#26410;&#25910;&#21040;)]</text><polygon fill="#000000" points="1139.437,3243.2939,1119.437,3251.2939,1139.437,3259.2939,1131.437,3251.2939" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="1127.437" x2="1841.3296" y1="3251.2939" y2="3251.2939"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="261.9805" x="1151.437" y="3239.9658">&#36820;&#22238; null &#25110;&#25243;&#20986;&#24322;&#24120;</text><polygon fill="#000000" points="134,3314.249,114,3322.249,134,3330.249,126,3322.249" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="122" x2="1095.437" y1="3322.249" y2="3322.249"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="168" x="146" y="3310.9209">&#26174;&#31034;&#38169;&#35823;&#20449;&#24687;</text><path d="M1126,3287.2939 L1126,3323.2939 A10,10 0 0 0 1136,3333.2939 L1298,3333.2939 A10,10 0 0 0 1308,3323.2939 L1308,3297.2939 L1288,3277.2939 L1136,3277.2939 A10,10 0 0 0 1126,3287.2939 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"/><path d="M1288,3277.2939 L1288,3292.2939 A5,5 0 0 0 1293,3297.2939 L1308,3297.2939 L1288,3277.2939 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="140" x="1138" y="3316.9209">&#36820;&#22238;&#20027;&#33756;&#21333;</text><rect fill="#EEEEEE" height="6" rx="10" ry="10" style="stroke:#EEEEEE;stroke-width:2.0;" width="5920.5161" x="0" y="3402.7266"/><line style="stroke:#000000;stroke-width:2.0;" x1="0" x2="5920.5161" y1="3402.7266" y2="3402.7266"/><line style="stroke:#000000;stroke-width:2.0;" x1="0" x2="5920.5161" y1="3408.7266" y2="3408.7266"/><rect fill="#EEEEEE" height="52.9551" rx="10" ry="10" style="stroke:#000000;stroke-width:4.0;" width="338.5703" x="2790.9729" y="3378.249"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="302.2305" x="2802.9729" y="3415.876">2c. &#36830;&#25509;&#24314;&#31435; (&#21457;&#36865;&#27169;&#24335;)</text><polygon fill="#000000" points="1083.437,3492.1592,1103.437,3500.1592,1083.437,3508.1592,1091.437,3500.1592" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="112" x2="1095.437" y1="3500.1592" y2="3500.1592"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="244.084" x="126" y="3488.8311">&#36873;&#25321; "1" (&#21457;&#36865;&#27169;&#24335;)</text><line style="stroke:#000000;stroke-width:2.0;" x1="1107.437" x2="1201.437" y1="3555.1143" y2="3555.1143"/><line style="stroke:#000000;stroke-width:2.0;" x1="1201.437" x2="1201.437" y1="3555.1143" y2="3581.1143"/><line style="stroke:#000000;stroke-width:2.0;" x1="1119.437" x2="1201.437" y1="3581.1143" y2="3581.1143"/><polygon fill="#000000" points="1139.437,3573.1143,1119.437,3581.1143,1139.437,3589.1143,1131.437,3581.1143" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="161.6699" x="1131.437" y="3543.7861">sendMode()</text><polygon fill="#000000" points="3035.4883,3648.0693,3055.4883,3656.0693,3035.4883,3664.0693,3043.4883,3656.0693" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1117.437" x2="3047.4883" y1="3656.0693" y2="3656.0693"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="362.6875" x="1131.437" y="3644.7412">new ConnectionHandler(...)</text><polygon fill="#000000" points="3035.4883,3713.0244,3055.4883,3721.0244,3035.4883,3729.0244,3043.4883,3721.0244" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1117.437" x2="3047.4883" y1="3721.0244" y2="3721.0244"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="290.3496" x="1131.437" y="3709.6963">establishConnection()</text><polygon fill="#000000" points="2593.8887,3777.9795,2573.8887,3785.9795,2593.8887,3793.9795,2585.8887,3785.9795" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="2581.8887" x2="3057.4883" y1="3785.9795" y2="3785.9795"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="446.9609" x="2605.8887" y="3774.6514">getValidInput("&#35831;&#36755;&#20837;&#23545;&#26041;IP&#22320;&#22336;")</text><polygon fill="#000000" points="3035.4883,3842.9346,3055.4883,3850.9346,3035.4883,3858.9346,3043.4883,3850.9346" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="2561.8887" x2="3047.4883" y1="3850.9346" y2="3850.9346"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="81.3613" x="2575.8887" y="3839.6064">&#36820;&#22238;IP</text><polygon fill="#000000" points="2593.8887,3907.8896,2573.8887,3915.8896,2593.8887,3923.8896,2585.8887,3915.8896" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="2581.8887" x2="3057.4883" y1="3915.8896" y2="3915.8896"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="449.5996" x="2605.8887" y="3904.5615">getValidInput("&#35831;&#36755;&#20837;&#23545;&#26041;&#31471;&#21475;&#21495;")</text><polygon fill="#000000" points="3035.4883,3972.8447,3055.4883,3980.8447,3035.4883,3988.8447,3043.4883,3980.8447" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="2561.8887" x2="3047.4883" y1="3980.8447" y2="3980.8447"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="112" x="2575.8887" y="3969.5166">&#36820;&#22238;&#31471;&#21475;</text><polygon fill="#000000" points="1875.3296,4099.71,1855.3296,4107.71,1875.3296,4115.71,1867.3296,4107.71" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1863.3296" x2="3057.4883" y1="4107.71" y2="4107.71"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="340.4434" x="1887.3296" y="4096.3818">connectToServer(ip, port)</text><path d="M1690.2324,4137.71 L1806.2852,4137.71 L1806.2852,4158.665 L1786.2852,4178.665 L1680.2324,4178.665 L1680.2324,4147.71 A10,10 0 0 1 1690.2324,4137.71 " fill="#EEEEEE" style="stroke:#000000;stroke-width:3.0;"/><rect fill="none" height="385.6406" rx="10" ry="10" style="stroke:#000000;stroke-width:3.0;" width="1577.6758" x="1680.2324" y="4137.71"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="36.0527" x="1710.2324" y="4169.3369">alt</text><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="133.8203" x="1836.2852" y="4171.3369">[&#36830;&#25509;&#25104;&#21151;]</text><polygon fill="#000000" points="3035.4883,4226.5752,3055.4883,4234.5752,3035.4883,4242.5752,3043.4883,4234.5752" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="1843.3296" x2="3047.4883" y1="4234.5752" y2="4234.5752"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="112" x="1857.3296" y="4223.2471">&#36830;&#25509;&#25104;&#21151;</text><path d="M1710.2324,4264.5752 L1869.9121,4264.5752 L1869.9121,4285.5303 L1849.9121,4305.5303 L1700.2324,4305.5303 L1700.2324,4274.5752 A10,10 0 0 1 1710.2324,4264.5752 " fill="#EEEEEE" style="stroke:#000000;stroke-width:3.0;"/><rect fill="none" height="244.7754" rx="10" ry="10" style="stroke:#000000;stroke-width:3.0;" width="1537.6758" x="1700.2324" y="4264.5752"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="79.6797" x="1730.2324" y="4296.2021">break</text><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="133.8203" x="1899.9121" y="4298.2021">[&#36830;&#25509;&#25104;&#21151;]</text><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="1700.2324" x2="3237.9082" y1="4314.4854" y2="4314.4854"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="133.8203" x="1710.2324" y="4344.1123">[&#36830;&#25509;&#22833;&#36133;]</text><line style="stroke:#000000;stroke-width:2.0;" x1="3055.4883" x2="3035.4883" y1="4402.3955" y2="4394.3955"/><line style="stroke:#000000;stroke-width:2.0;" x1="3055.4883" x2="3035.4883" y1="4402.3955" y2="4410.3955"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="1843.3296" x2="3057.4883" y1="4402.3955" y2="4402.3955"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="161.3828" x="1857.3296" y="4391.0674">IOException</text><line style="stroke:#000000;stroke-width:2.0;" x1="3079.4883" x2="3163.4883" y1="4467.3506" y2="4467.3506"/><line style="stroke:#000000;stroke-width:2.0;" x1="3163.4883" x2="3163.4883" y1="4467.3506" y2="4493.3506"/><line style="stroke:#000000;stroke-width:2.0;" x1="3081.4883" x2="3163.4883" y1="4493.3506" y2="4493.3506"/><polygon fill="#000000" points="3101.4883,4485.3506,3081.4883,4493.3506,3101.4883,4501.3506,3093.4883,4493.3506" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="100.4199" x="3093.4883" y="4456.0225">&#31561;&#24453;5&#31186;</text><line style="stroke:#000000;stroke-width:2.0;" x1="3079.4883" x2="3173.4883" y1="4576.3057" y2="4576.3057"/><line style="stroke:#000000;stroke-width:2.0;" x1="3173.4883" x2="3173.4883" y1="4576.3057" y2="4602.3057"/><line style="stroke:#000000;stroke-width:2.0;" x1="3091.4883" x2="3173.4883" y1="4602.3057" y2="4602.3057"/><polygon fill="#000000" points="3111.4883,4594.3057,3091.4883,4602.3057,3111.4883,4610.3057,3103.4883,4602.3057" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="373.8711" x="3103.4883" y="4564.9775">performHandshake(ip, port)</text><polygon fill="#000000" points="1875.3296,4669.2607,1855.3296,4677.2607,1875.3296,4685.2607,1867.3296,4677.2607" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1863.3296" x2="3067.4883" y1="4677.2607" y2="4677.2607"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="677.8926" x="1887.3296" y="4665.9326">sendHandshakeMessage(localUser.getUsername())</text><polygon fill="#000000" points="1875.3296,4794.2158,1855.3296,4802.2158,1875.3296,4810.2158,1867.3296,4802.2158" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1863.3296" x2="3067.4883" y1="4802.2158" y2="4802.2158"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="380.7891" x="1887.3296" y="4790.8877">receiveHandshakeMessage()</text><path d="M1005.5195,4832.2158 L1121.5723,4832.2158 L1121.5723,4853.1709 L1101.5723,4873.1709 L995.5195,4873.1709 L995.5195,4842.2158 A10,10 0 0 1 1005.5195,4832.2158 " fill="#EEEEEE" style="stroke:#000000;stroke-width:3.0;"/><rect fill="none" height="598.5957" rx="10" ry="10" style="stroke:#000000;stroke-width:3.0;" width="2779.8906" x="995.5195" y="4832.2158"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="36.0527" x="1025.5195" y="4863.8428">alt</text><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="331.9805" x="1151.5723" y="4865.8428">[&#25569;&#25163;&#25104;&#21151; (&#25509;&#25910;&#21040;&#29992;&#25143;&#21517;)]</text><polygon fill="#000000" points="3045.4883,4921.0811,3065.4883,4929.0811,3045.4883,4937.0811,3053.4883,4929.0811" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="1843.3296" x2="3057.4883" y1="4929.0811" y2="4929.0811"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="196" x="1857.3296" y="4917.7529">&#36820;&#22238;&#23545;&#26041;&#29992;&#25143;&#21517;</text><polygon fill="#000000" points="3646.7266,4986.0361,3666.7266,4994.0361,3646.7266,5002.0361,3654.7266,4994.0361" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="3089.4883" x2="3658.7266" y1="4994.0361" y2="4994.0361"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="386.5176" x="3103.4883" y="4982.708">new User(username, ip, port)</text><polygon fill="#000000" points="1139.437,5110.9912,1119.437,5118.9912,1139.437,5126.9912,1131.437,5118.9912" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="1127.437" x2="3057.4883" y1="5118.9912" y2="5118.9912"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="224" x="1151.437" y="5107.6631">&#36820;&#22238;&#36828;&#31243;&#29992;&#25143;&#23454;&#20363;</text><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="995.5195" x2="3775.4102" y1="5136.9912" y2="5136.9912"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="359.9805" x="1005.5195" y="5166.6182">[&#25569;&#25163;&#22833;&#36133; (&#26410;&#25509;&#25910;&#21040;&#29992;&#25143;&#21517;)]</text><polygon fill="#000000" points="3035.4883,5216.9014,3055.4883,5224.9014,3035.4883,5232.9014,3043.4883,5224.9014" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="1843.3296" x2="3047.4883" y1="5224.9014" y2="5224.9014"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="113.6953" x="1857.3296" y="5213.5732">&#36820;&#22238; null</text><polygon fill="#000000" points="1875.3296,5281.8564,1855.3296,5289.8564,1875.3296,5297.8564,1867.3296,5289.8564" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1863.3296" x2="3057.4883" y1="5289.8564" y2="5289.8564"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="240.748" x="1887.3296" y="5278.5283">closeConnection()</text><polygon fill="#000000" points="1139.437,5406.8115,1119.437,5414.8115,1139.437,5422.8115,1131.437,5414.8115" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="1127.437" x2="3067.4883" y1="5414.8115" y2="5414.8115"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="113.6953" x="1151.437" y="5403.4834">&#36820;&#22238; null</text><path d="M1005.5195,5458.8115 L1121.5723,5458.8115 L1121.5723,5479.7666 L1101.5723,5499.7666 L995.5195,5499.7666 L995.5195,5468.8115 A10,10 0 0 1 1005.5195,5458.8115 " fill="#EEEEEE" style="stroke:#000000;stroke-width:3.0;"/><rect fill="none" height="465.6406" rx="10" ry="10" style="stroke:#000000;stroke-width:3.0;" width="3541.1655" x="995.5195" y="5458.8115"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="36.0527" x="1025.5195" y="5490.4385">alt</text><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="217.8203" x="1151.5723" y="5492.4385">[&#36830;&#25509;&#21644;&#25569;&#25163;&#25104;&#21151;]</text><polygon fill="#000000" points="3830.7886,5547.6768,3850.7886,5555.6768,3830.7886,5563.6768,3838.7886,5555.6768" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1117.437" x2="3842.7886" y1="5555.6768" y2="5555.6768"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="264.8105" x="1131.437" y="5544.3486">new ChatSession(...)</text><line style="stroke:#000000;stroke-width:2.0;" x1="3874.7886" x2="3958.7886" y1="5630.6318" y2="5630.6318"/><line style="stroke:#000000;stroke-width:2.0;" x1="3958.7886" x2="3958.7886" y1="5630.6318" y2="5656.6318"/><line style="stroke:#000000;stroke-width:2.0;" x1="3864.7886" x2="3958.7886" y1="5656.6318" y2="5656.6318"/><polygon fill="#000000" points="3884.7886,5648.6318,3864.7886,5656.6318,3884.7886,5664.6318,3876.7886,5656.6318" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="213.8965" x="3888.7886" y="5619.3037">initCommands()</text><path d="M4145.8965,5598.6768 L4145.8965,5634.6768 A10,10 0 0 0 4155.8965,5644.6768 L4485.8965,5644.6768 A10,10 0 0 0 4495.8965,5634.6768 L4495.8965,5608.6768 L4475.8965,5588.6768 L4155.8965,5588.6768 A10,10 0 0 0 4145.8965,5598.6768 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"/><path d="M4475.8965,5588.6768 L4475.8965,5603.6768 A5,5 0 0 0 4480.8965,5608.6768 L4495.8965,5608.6768 L4475.8965,5588.6768 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="308" x="4157.8965" y="5628.3037">&#27880;&#20876;&#25152;&#26377;&#21487;&#29992;&#21629;&#20196;&#21040;&#21015;&#34920;</text><polygon fill="#000000" points="3830.7886,5703.5869,3850.7886,5711.5869,3830.7886,5719.5869,3838.7886,5711.5869" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1117.437" x2="3842.7886" y1="5711.5869" y2="5711.5869"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="78.6953" x="1131.437" y="5700.2588">start()</text><polygon fill="#000000" points="3830.7886,5768.542,3850.7886,5776.542,3830.7886,5784.542,3838.7886,5776.542" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="1107.437" x2="3842.7886" y1="5776.542" y2="5776.542"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="140" x="1121.437" y="5765.2139">&#25511;&#21046;&#26435;&#31227;&#20132;</text><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="995.5195" x2="4536.6851" y1="5794.542" y2="5794.542"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="217.8203" x="1005.5195" y="5824.1689">[&#36830;&#25509;&#25110;&#25569;&#25163;&#22833;&#36133;]</text><line style="stroke:#000000;stroke-width:2.0;" x1="1107.437" x2="1191.437" y1="5892.4521" y2="5892.4521"/><line style="stroke:#000000;stroke-width:2.0;" x1="1191.437" x2="1191.437" y1="5892.4521" y2="5918.4521"/><line style="stroke:#000000;stroke-width:2.0;" x1="1097.437" x2="1191.437" y1="5918.4521" y2="5918.4521"/><polygon fill="#000000" points="1117.437,5910.4521,1097.437,5918.4521,1117.437,5926.4521,1109.437,5918.4521" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="441.3965" x="1121.437" y="5881.124">showMainMenu(download_path)</text><path d="M1585.3965,5860.4971 L1585.3965,5896.4971 A10,10 0 0 0 1595.3965,5906.4971 L1757.3965,5906.4971 A10,10 0 0 0 1767.3965,5896.4971 L1767.3965,5870.4971 L1747.3965,5850.4971 L1595.3965,5850.4971 A10,10 0 0 0 1585.3965,5860.4971 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"/><path d="M1747.3965,5850.4971 L1747.3965,5865.4971 A5,5 0 0 0 1752.3965,5870.4971 L1767.3965,5870.4971 L1747.3965,5850.4971 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="140" x="1597.3965" y="5890.124">&#36820;&#22238;&#20027;&#33756;&#21333;</text><rect fill="#EEEEEE" height="6" rx="10" ry="10" style="stroke:#EEEEEE;stroke-width:2.0;" width="5920.5161" x="0" y="5982.9297"/><line style="stroke:#000000;stroke-width:2.0;" x1="0" x2="5920.5161" y1="5982.9297" y2="5982.9297"/><line style="stroke:#000000;stroke-width:2.0;" x1="0" x2="5920.5161" y1="5988.9297" y2="5988.9297"/><rect fill="#EEEEEE" height="52.9551" rx="10" ry="10" style="stroke:#000000;stroke-width:4.0;" width="321.9453" x="2799.2854" y="5958.4521"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="285.6055" x="2811.2854" y="5996.0791">3. &#20250;&#35805;&#36816;&#34892;&#19982;&#28040;&#24687;&#22788;&#29702;</text><line style="stroke:#000000;stroke-width:2.0;" x1="3874.7886" x2="3958.7886" y1="6080.3623" y2="6080.3623"/><line style="stroke:#000000;stroke-width:2.0;" x1="3958.7886" x2="3958.7886" y1="6080.3623" y2="6106.3623"/><line style="stroke:#000000;stroke-width:2.0;" x1="3876.7886" x2="3958.7886" y1="6106.3623" y2="6106.3623"/><polygon fill="#000000" points="3896.7886,6098.3623,3876.7886,6106.3623,3896.7886,6114.3623,3888.7886,6106.3623" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="377.9727" x="3888.7886" y="6069.0342">initializeFileTransferService()</text><line style="stroke:#000000;stroke-width:2.0;" x1="3874.7886" x2="3968.7886" y1="6161.3174" y2="6161.3174"/><line style="stroke:#000000;stroke-width:2.0;" x1="3968.7886" x2="3968.7886" y1="6161.3174" y2="6187.3174"/><line style="stroke:#000000;stroke-width:2.0;" x1="3886.7886" x2="3968.7886" y1="6187.3174" y2="6187.3174"/><polygon fill="#000000" points="3906.7886,6179.3174,3886.7886,6187.3174,3906.7886,6195.3174,3898.7886,6187.3174" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="246.5039" x="3898.7886" y="6149.9893">showChatHistory()</text><polygon fill="#000000" points="2128.0161,6254.2725,2108.0161,6262.2725,2128.0161,6270.2725,2120.0161,6262.2725" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="2116.0161" x2="3862.7886" y1="6262.2725" y2="6262.2725"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="240.8438" x="2140.0161" y="6250.9443">getChatHistory(...)</text><polygon fill="#000000" points="3840.7886,6319.2275,3860.7886,6327.2275,3840.7886,6335.2275,3848.7886,6327.2275" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="2096.0161" x2="3852.7886" y1="6327.2275" y2="6327.2275"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="168" x="2110.0161" y="6315.8994">&#36820;&#22238;&#32842;&#22825;&#21382;&#21490;</text><polygon fill="#000000" points="134,6384.1826,114,6392.1826,134,6400.1826,126,6392.1826" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="122" x2="3852.7886" y1="6392.1826" y2="6392.1826"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="168" x="146" y="6380.8545">&#26174;&#31034;&#21382;&#21490;&#28040;&#24687;</text><line style="stroke:#000000;stroke-width:2.0;" x1="3874.7886" x2="3958.7886" y1="6457.1377" y2="6457.1377"/><line style="stroke:#000000;stroke-width:2.0;" x1="3958.7886" x2="3958.7886" y1="6457.1377" y2="6483.1377"/><line style="stroke:#000000;stroke-width:2.0;" x1="3876.7886" x2="3958.7886" y1="6483.1377" y2="6483.1377"/><polygon fill="#000000" points="3896.7886,6475.1377,3876.7886,6483.1377,3896.7886,6491.1377,3888.7886,6483.1377" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="325.8828" x="3888.7886" y="6445.8096">createMessageHandler()</text><path d="M3884,6519.1377 L3884,6591.1377 A10,10 0 0 0 3894,6601.1377 L4380,6601.1377 A10,10 0 0 0 4390,6591.1377 L4390,6529.1377 L4370,6509.1377 L3894,6509.1377 A10,10 0 0 0 3884,6519.1377 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"/><path d="M4370,6509.1377 L4370,6524.1377 A5,5 0 0 0 4375,6529.1377 L4390,6529.1377 L4370,6509.1377 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="465.3359" x="3896" y="6548.7646">&#21019;&#24314;&#23454;&#29616;&#20102; MessageHandler &#25509;&#21475;&#30340;</text><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="196" x="3896" y="6585.7197">&#21311;&#21517;&#20869;&#37096;&#31867;&#23454;&#20363;</text><polygon fill="#000000" points="4595.2046,6654.0029,4615.2046,6662.0029,4595.2046,6670.0029,4603.2046,6662.0029" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="3874.7886" x2="4607.2046" y1="6662.0029" y2="6662.0029"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="554.3809" x="3888.7886" y="6650.6748">new MessageService(..., messageHandler)</text><polygon fill="#000000" points="4595.2046,6718.958,4615.2046,6726.958,4595.2046,6734.958,4603.2046,6726.958" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="3874.7886" x2="4607.2046" y1="6726.958" y2="6726.958"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="78.6953" x="3888.7886" y="6715.6299">start()</text><line style="stroke:#000000;stroke-width:2.0;" x1="4639.2046" x2="4723.2046" y1="6801.9131" y2="6801.9131"/><line style="stroke:#000000;stroke-width:2.0;" x1="4723.2046" x2="4723.2046" y1="6801.9131" y2="6827.9131"/><line style="stroke:#000000;stroke-width:2.0;" x1="4629.2046" x2="4723.2046" y1="6827.9131" y2="6827.9131"/><polygon fill="#000000" points="4649.2046,6819.9131,4629.2046,6827.9131,4649.2046,6835.9131,4641.2046,6827.9131" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="280" x="4653.2046" y="6790.585">&#21551;&#21160;&#21518;&#21488;&#32447;&#31243;&#30417;&#21548;&#28040;&#24687;</text><line style="stroke:#000000;stroke-width:2.0;" x1="3874.7886" x2="3968.7886" y1="6872.8682" y2="6872.8682"/><line style="stroke:#000000;stroke-width:2.0;" x1="3968.7886" x2="3968.7886" y1="6872.8682" y2="6898.8682"/><line style="stroke:#000000;stroke-width:2.0;" x1="3886.7886" x2="3968.7886" y1="6898.8682" y2="6898.8682"/><polygon fill="#000000" points="3906.7886,6890.8682,3886.7886,6898.8682,3906.7886,6906.8682,3898.7886,6898.8682" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="193.6348" x="3898.7886" y="6861.54">runChatLoop()</text><path d="M70,6938.8682 L213.7383,6938.8682 L213.7383,6959.8232 L193.7383,6979.8232 L60,6979.8232 L60,6948.8682 A10,10 0 0 1 70,6938.8682 " fill="#EEEEEE" style="stroke:#000000;stroke-width:3.0;"/><rect fill="none" height="458.6855" rx="10" ry="10" style="stroke:#000000;stroke-width:3.0;" width="4702.2153" x="60" y="6938.8682"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="63.7383" x="90" y="6970.4951">loop</text><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="133.8203" x="243.7383" y="6972.4951">[&#32842;&#22825;&#24490;&#29615;]</text><polygon fill="#000000" points="3840.7886,7027.7334,3860.7886,7035.7334,3840.7886,7043.7334,3848.7886,7035.7334" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="112" x2="3852.7886" y1="7035.7334" y2="7035.7334"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="209.4258" x="126" y="7024.4053">&#36755;&#20837;&#28040;&#24687; "&#20320;&#22909;!"</text><polygon fill="#000000" points="4595.2046,7092.6885,4615.2046,7100.6885,4595.2046,7108.6885,4603.2046,7100.6885" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="3884.7886" x2="4607.2046" y1="7100.6885" y2="7100.6885"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="346.8555" x="3898.7886" y="7089.3604">sendTextMessage("&#20320;&#22909;!")</text><polygon fill="#000000" points="1875.3296,7157.6436,1855.3296,7165.6436,1875.3296,7173.6436,1867.3296,7165.6436" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1863.3296" x2="4617.2046" y1="7165.6436" y2="7165.6436"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="346.8555" x="1887.3296" y="7154.3154">sendTextMessage("&#20320;&#22909;!")</text><line style="stroke:#000000;stroke-width:2.0;" x1="1853.3296" x2="1937.3296" y1="7240.5986" y2="7240.5986"/><line style="stroke:#000000;stroke-width:2.0;" x1="1937.3296" x2="1937.3296" y1="7240.5986" y2="7266.5986"/><line style="stroke:#000000;stroke-width:2.0;" x1="1843.3296" x2="1937.3296" y1="7266.5986" y2="7266.5986"/><polygon fill="#000000" points="1863.3296,7258.5986,1843.3296,7266.5986,1863.3296,7274.5986,1855.3296,7266.5986" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="168.041" x="1867.3296" y="7229.2705">[TCP] "&#20320;&#22909;!"</text><polygon fill="#000000" points="2128.0161,7313.5537,2108.0161,7321.5537,2128.0161,7329.5537,2120.0161,7321.5537" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="2116.0161" x2="4617.2046" y1="7321.5537" y2="7321.5537"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="313.4824" x="2140.0161" y="7310.2256">saveMessage(message)</text><rect fill="#EEEEEE" height="6" rx="10" ry="10" style="stroke:#EEEEEE;stroke-width:2.0;" width="5920.5161" x="0" y="7456.0313"/><line style="stroke:#000000;stroke-width:2.0;" x1="0" x2="5920.5161" y1="7456.0313" y2="7456.0313"/><line style="stroke:#000000;stroke-width:2.0;" x1="0" x2="5920.5161" y1="7462.0313" y2="7462.0313"/><rect fill="#EEEEEE" height="52.9551" rx="10" ry="10" style="stroke:#000000;stroke-width:4.0;" width="321.9453" x="2799.2854" y="7431.5537"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="285.6055" x="2811.2854" y="7469.1807">4. &#25509;&#25910;&#28040;&#24687;&#19982;&#21629;&#20196;&#22788;&#29702;</text><polygon fill="#000000" points="4595.2046,7545.4639,4615.2046,7553.4639,4595.2046,7561.4639,4603.2046,7553.4639" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1843.3296" x2="4607.2046" y1="7553.4639" y2="7553.4639"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="278.9883" x="1857.3296" y="7542.1357">(&#21518;&#21488;&#32447;&#31243;) &#25509;&#25910;&#21040;&#28040;&#24687;</text><polygon fill="#000000" points="3906.7886,7610.4189,3886.7886,7618.4189,3906.7886,7626.4189,3898.7886,7618.4189" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="3894.7886" x2="4617.2046" y1="7618.4189" y2="7618.4189"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="450.8164" x="3918.7886" y="7607.0908">(Handler) handleMessage("&#20320;&#22909;!")</text><polygon fill="#000000" points="134,7675.374,114,7683.374,134,7691.374,126,7683.374" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="122" x2="3852.7886" y1="7683.374" y2="7683.374"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="244.1523" x="146" y="7672.0459">&#26174;&#31034; "&#29992;&#25143;A: &#20320;&#22909;!"</text><polygon fill="#000000" points="3840.7886,7740.3291,3860.7886,7748.3291,3840.7886,7756.3291,3848.7886,7748.3291" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="112" x2="3852.7886" y1="7748.3291" y2="7748.3291"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="215.0996" x="126" y="7737.001">&#36755;&#20837;&#21629;&#20196; "/help"</text><line style="stroke:#000000;stroke-width:2.0;" x1="3884.7886" x2="3978.7886" y1="7803.2842" y2="7803.2842"/><line style="stroke:#000000;stroke-width:2.0;" x1="3978.7886" x2="3978.7886" y1="7803.2842" y2="7829.2842"/><line style="stroke:#000000;stroke-width:2.0;" x1="3896.7886" x2="3978.7886" y1="7829.2842" y2="7829.2842"/><polygon fill="#000000" points="3916.7886,7821.2842,3896.7886,7829.2842,3916.7886,7837.2842,3908.7886,7829.2842" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="344.3809" x="3908.7886" y="7791.9561">handleCommand("/help")</text><path d="M4306.3809,7791.3291 L4306.3809,7827.3291 A10,10 0 0 0 4316.3809,7837.3291 L4646.3809,7837.3291 A10,10 0 0 0 4656.3809,7827.3291 L4656.3809,7801.3291 L4636.3809,7781.3291 L4316.3809,7781.3291 A10,10 0 0 0 4306.3809,7791.3291 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"/><path d="M4636.3809,7781.3291 L4636.3809,7796.3291 A5,5 0 0 0 4641.3809,7801.3291 L4656.3809,7801.3291 L4636.3809,7781.3291 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="308" x="4318.3809" y="7820.9561">&#22312;&#21629;&#20196;&#21015;&#34920;&#20013;&#26597;&#25214;&#24182;&#25191;&#34892;</text><path d="M70,7869.2842 L186.0527,7869.2842 L186.0527,7890.2393 L166.0527,7910.2393 L60,7910.2393 L60,7879.2842 A10,10 0 0 1 70,7869.2842 " fill="#EEEEEE" style="stroke:#000000;stroke-width:3.0;"/><rect fill="none" height="283.7305" rx="10" ry="10" style="stroke:#000000;stroke-width:3.0;" width="5378.6958" x="60" y="7869.2842"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="36.0527" x="90" y="7900.9111">alt</text><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="133.8203" x="216.0527" y="7902.9111">[&#25214;&#21040;&#21629;&#20196;]</text><polygon fill="#000000" points="5305.8608,7958.1494,5325.8608,7966.1494,5305.8608,7974.1494,5313.8608,7966.1494" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="3894.7886" x2="5317.8608" y1="7966.1494" y2="7966.1494"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="222.3184" x="3908.7886" y="7954.8213">execute(context)</text><polygon fill="#000000" points="134,8023.1045,114,8031.1045,134,8039.1045,126,8031.1045" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="122" x2="5337.8608" y1="8031.1045" y2="8031.1045"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="168" x="146" y="8019.7764">&#26174;&#31034;&#21629;&#20196;&#24110;&#21161;</text><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="60" x2="5438.6958" y1="8049.1045" y2="8049.1045"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="161.8203" x="70" y="8078.7314">[&#26410;&#25214;&#21040;&#21629;&#20196;]</text><polygon fill="#000000" points="134,8129.0146,114,8137.0146,134,8145.0146,126,8137.0146" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="122" x2="3872.7886" y1="8137.0146" y2="8137.0146"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="200.6758" x="146" y="8125.6865">&#26174;&#31034; "&#26410;&#30693;&#21629;&#20196;"</text><rect fill="#EEEEEE" height="6" rx="10" ry="10" style="stroke:#EEEEEE;stroke-width:2.0;" width="5920.5161" x="0" y="8211.4922"/><line style="stroke:#000000;stroke-width:2.0;" x1="0" x2="5920.5161" y1="8211.4922" y2="8211.4922"/><line style="stroke:#000000;stroke-width:2.0;" x1="0" x2="5920.5161" y1="8217.4922" y2="8217.4922"/><rect fill="#EEEEEE" height="52.9551" rx="10" ry="10" style="stroke:#000000;stroke-width:4.0;" width="237.9453" x="2841.2854" y="8187.0146"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="201.6055" x="2853.2854" y="8224.6416">5. &#25991;&#20214;&#20256;&#36755;&#27969;&#31243;</text><polygon fill="#000000" points="3840.7886,8300.9248,3860.7886,8308.9248,3840.7886,8316.9248,3848.7886,8308.9248" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="112" x2="3852.7886" y1="8308.9248" y2="8308.9248"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="453.9199" x="126" y="8297.5967">&#36755;&#20837;&#21629;&#20196; "/file /path/to/myfile.txt"</text><line style="stroke:#000000;stroke-width:2.0;" x1="3884.7886" x2="3978.7886" y1="8363.8799" y2="8363.8799"/><line style="stroke:#000000;stroke-width:2.0;" x1="3978.7886" x2="3978.7886" y1="8363.8799" y2="8389.8799"/><line style="stroke:#000000;stroke-width:2.0;" x1="3896.7886" x2="3978.7886" y1="8389.8799" y2="8389.8799"/><polygon fill="#000000" points="3916.7886,8381.8799,3896.7886,8389.8799,3916.7886,8397.8799,3908.7886,8389.8799" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="354.9219" x="3908.7886" y="8352.5518">handleCommand("/file ...")</text><polygon fill="#000000" points="5504.7319,8456.835,5524.7319,8464.835,5504.7319,8472.835,5512.7319,8464.835" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="3894.7886" x2="5516.7319" y1="8464.835" y2="8464.835"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="222.3184" x="3908.7886" y="8453.5068">execute(context)</text><path d="M3904,8500.835 L3904,8536.835 A10,10 0 0 0 3914,8546.835 L4240,8546.835 A10,10 0 0 0 4250,8536.835 L4250,8510.835 L4230,8490.835 L3914,8490.835 A10,10 0 0 0 3904,8500.835 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"/><path d="M4230,8490.835 L4230,8505.835 A5,5 0 0 0 4235,8510.835 L4250,8510.835 L4230,8490.835 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="305.5938" x="3916" y="8530.4619">&#27492;&#22788;&#29305;&#25351; FileCommand</text><polygon fill="#000000" points="5009.2046,8598.7451,4989.2046,8606.7451,5009.2046,8614.7451,5001.2046,8606.7451" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="4997.2046" x2="5526.7319" y1="8606.7451" y2="8606.7451"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="401.2695" x="5021.2046" y="8595.417">sendFile("/path/to/myfile.txt")</text><polygon fill="#000000" points="1875.3296,8663.7002,1855.3296,8671.7002,1875.3296,8679.7002,1867.3296,8671.7002" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1863.3296" x2="4965.2046" y1="8671.7002" y2="8671.7002"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="465.0625" x="1887.3296" y="8660.3721">sendTextMessage("FILE:myfile.txt")</text><line style="stroke:#000000;stroke-width:2.0;" x1="4987.2046" x2="5071.2046" y1="8796.6553" y2="8796.6553"/><line style="stroke:#000000;stroke-width:2.0;" x1="5071.2046" x2="5071.2046" y1="8796.6553" y2="8822.6553"/><line style="stroke:#000000;stroke-width:2.0;" x1="4989.2046" x2="5071.2046" y1="8822.6553" y2="8822.6553"/><polygon fill="#000000" points="5009.2046,8814.6553,4989.2046,8822.6553,5009.2046,8830.6553,5001.2046,8822.6553" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="294.6563" x="5001.2046" y="8785.3271">&#35835;&#21462;&#25991;&#20214;&#24182;&#21019;&#24314;FileInfo</text><polygon fill="#000000" points="1875.3296,8879.6104,1855.3296,8887.6104,1875.3296,8895.6104,1867.3296,8887.6104" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1863.3296" x2="4965.2046" y1="8887.6104" y2="8887.6104"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="221.8672" x="1887.3296" y="8876.2822">sendFile(fileInfo)</text><polygon fill="#000000" points="2118.0161,9004.5654,2098.0161,9012.5654,2118.0161,9020.5654,2110.0161,9012.5654" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="2106.0161" x2="4965.2046" y1="9012.5654" y2="9012.5654"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="313.4824" x="2130.0161" y="9001.2373">saveMessage(message)</text><polygon fill="#000000" points="5514.7319,9069.5205,5534.7319,9077.5205,5514.7319,9085.5205,5522.7319,9077.5205" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="4977.2046" x2="5526.7319" y1="9077.5205" y2="9077.5205"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="112" x="4991.2046" y="9066.1924">&#36820;&#22238;&#25104;&#21151;</text><polygon fill="#000000" points="4595.2046,9134.4756,4615.2046,9142.4756,4595.2046,9150.4756,4603.2046,9142.4756" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1843.3296" x2="4607.2046" y1="9142.4756" y2="9142.4756"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="494.6211" x="1857.3296" y="9131.1475">(&#21518;&#21488;&#32447;&#31243;) &#25509;&#25910;&#21040;&#28040;&#24687; "FILE:myfile.txt"</text><polygon fill="#000000" points="3916.7886,9199.4307,3896.7886,9207.4307,3916.7886,9215.4307,3908.7886,9207.4307" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="3904.7886" x2="4617.2046" y1="9207.4307" y2="9207.4307"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="465.8965" x="3928.7886" y="9196.1025">(Handler) handleMessage("FILE:...")</text><line style="stroke:#000000;stroke-width:2.0;" x1="3894.7886" x2="3988.7886" y1="9262.3857" y2="9262.3857"/><line style="stroke:#000000;stroke-width:2.0;" x1="3988.7886" x2="3988.7886" y1="9262.3857" y2="9288.3857"/><line style="stroke:#000000;stroke-width:2.0;" x1="3906.7886" x2="3988.7886" y1="9288.3857" y2="9288.3857"/><polygon fill="#000000" points="3926.7886,9280.3857,3906.7886,9288.3857,3926.7886,9296.3857,3918.7886,9288.3857" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="257.7148" x="3918.7886" y="9251.0576">handleFileReceive()</text><polygon fill="#000000" points="4943.2046,9355.3408,4963.2046,9363.3408,4943.2046,9371.3408,4951.2046,9363.3408" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="3904.7886" x2="4955.2046" y1="9363.3408" y2="9363.3408"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="158.9082" x="3918.7886" y="9352.0127">receiveFile()</text><polygon fill="#000000" points="1875.3296,9420.2959,1855.3296,9428.2959,1875.3296,9436.2959,1867.3296,9428.2959" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1863.3296" x2="4965.2046" y1="9428.2959" y2="9428.2959"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="158.9082" x="1887.3296" y="9416.9678">receiveFile()</text><polygon fill="#000000" points="4943.2046,9485.251,4963.2046,9493.251,4943.2046,9501.251,4951.2046,9493.251" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="1843.3296" x2="4955.2046" y1="9493.251" y2="9493.251"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="210.6563" x="1857.3296" y="9481.9229">&#36820;&#22238;FileInfo&#23545;&#35937;</text><line style="stroke:#000000;stroke-width:2.0;" x1="4987.2046" x2="5071.2046" y1="9558.2061" y2="9558.2061"/><line style="stroke:#000000;stroke-width:2.0;" x1="5071.2046" x2="5071.2046" y1="9558.2061" y2="9584.2061"/><line style="stroke:#000000;stroke-width:2.0;" x1="4989.2046" x2="5071.2046" y1="9584.2061" y2="9584.2061"/><polygon fill="#000000" points="5009.2046,9576.2061,4989.2046,9584.2061,5009.2046,9592.2061,5001.2046,9584.2061" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="168" x="5001.2046" y="9546.8779">&#20889;&#20837;&#25991;&#20214;&#25968;&#25454;</text><polygon fill="#000000" points="2118.0161,9641.1611,2098.0161,9649.1611,2118.0161,9657.1611,2110.0161,9649.1611" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="2106.0161" x2="4965.2046" y1="9649.1611" y2="9649.1611"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="313.4824" x="2130.0161" y="9637.833">saveMessage(message)</text><polygon fill="#000000" points="3926.7886,9706.1162,3906.7886,9714.1162,3926.7886,9722.1162,3918.7886,9714.1162" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="3914.7886" x2="4975.2046" y1="9714.1162" y2="9714.1162"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="168" x="3938.7886" y="9702.7881">&#36820;&#22238;&#25991;&#20214;&#36335;&#24452;</text><polygon fill="#000000" points="134,9771.0713,114,9779.0713,134,9787.0713,126,9779.0713" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="122" x2="3862.7886" y1="9779.0713" y2="9779.0713"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="256.6758" x="146" y="9767.7432">&#26174;&#31034; "&#25991;&#20214;&#25509;&#25910;&#25104;&#21151;"</text><rect fill="#EEEEEE" height="6" rx="10" ry="10" style="stroke:#EEEEEE;stroke-width:2.0;" width="5920.5161" x="0" y="9839.5488"/><line style="stroke:#000000;stroke-width:2.0;" x1="0" x2="5920.5161" y1="9839.5488" y2="9839.5488"/><line style="stroke:#000000;stroke-width:2.0;" x1="0" x2="5920.5161" y1="9845.5488" y2="9845.5488"/><rect fill="#EEEEEE" height="52.9551" rx="10" ry="10" style="stroke:#000000;stroke-width:4.0;" width="324.1055" x="2798.2053" y="9815.0713"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="287.7656" x="2810.2053" y="9852.6982">6. &#20250;&#35805;&#32467;&#26463; (&#29992;&#25143;&#21457;&#36215;)</text><polygon fill="#000000" points="3850.7886,9928.9814,3870.7886,9936.9814,3850.7886,9944.9814,3858.7886,9936.9814" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="112" x2="3862.7886" y1="9936.9814" y2="9936.9814"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="204.5996" x="126" y="9925.6533">&#36755;&#20837;&#21629;&#20196; "/exit"</text><line style="stroke:#000000;stroke-width:2.0;" x1="3894.7886" x2="3988.7886" y1="9991.9365" y2="9991.9365"/><line style="stroke:#000000;stroke-width:2.0;" x1="3988.7886" x2="3988.7886" y1="9991.9365" y2="10017.9365"/><line style="stroke:#000000;stroke-width:2.0;" x1="3906.7886" x2="3988.7886" y1="10017.9365" y2="10017.9365"/><polygon fill="#000000" points="3926.7886,10009.9365,3906.7886,10017.9365,3926.7886,10025.9365,3918.7886,10017.9365" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="333.8809" x="3918.7886" y="9980.6084">handleCommand("/exit")</text><polygon fill="#000000" points="5725.6421,10084.8916,5745.6421,10092.8916,5725.6421,10100.8916,5733.6421,10092.8916" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="3904.7886" x2="5737.6421" y1="10092.8916" y2="10092.8916"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="222.3184" x="3918.7886" y="10081.5635">execute(context)</text><path d="M3914,10128.8916 L3914,10164.8916 A10,10 0 0 0 3924,10174.8916 L4252,10174.8916 A10,10 0 0 0 4262,10164.8916 L4262,10138.8916 L4242,10118.8916 L3924,10118.8916 A10,10 0 0 0 3914,10128.8916 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"/><path d="M4242,10118.8916 L4242,10133.8916 A5,5 0 0 0 4247,10138.8916 L4262,10138.8916 L4242,10118.8916 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="307.3984" x="3926" y="10158.5186">&#27492;&#22788;&#29305;&#25351; ExitCommand</text><polygon fill="#000000" points="3916.7886,10226.8018,3896.7886,10234.8018,3916.7886,10242.8018,3908.7886,10234.8018" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;stroke-dasharray:2.0,2.0;" x1="3904.7886" x2="5757.6421" y1="10234.8018" y2="10234.8018"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="125.7676" x="3928.7886" y="10223.4736">&#36820;&#22238; false</text><path d="M3904,10270.8018 L3904,10342.8018 A10,10 0 0 0 3914,10352.8018 L4428,10352.8018 A10,10 0 0 0 4438,10342.8018 L4438,10280.8018 L4418,10260.8018 L3914,10260.8018 A10,10 0 0 0 3904,10270.8018 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"/><path d="M4418,10260.8018 L4418,10275.8018 A5,5 0 0 0 4423,10280.8018 L4438,10280.8018 L4418,10260.8018 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="492.0098" x="3916" y="10300.4287">runChatLoop &#24490;&#29615;&#22240;&#36820;&#22238; false &#32780;&#32456;&#27490;,</text><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="359.4473" x="3916" y="10337.3838">&#36827;&#20837; start() &#26041;&#27861;&#30340; finally &#22359;</text><line style="stroke:#000000;stroke-width:2.0;" x1="3894.7886" x2="3988.7886" y1="10403.667" y2="10403.667"/><line style="stroke:#000000;stroke-width:2.0;" x1="3988.7886" x2="3988.7886" y1="10403.667" y2="10429.667"/><line style="stroke:#000000;stroke-width:2.0;" x1="3906.7886" x2="3988.7886" y1="10429.667" y2="10429.667"/><polygon fill="#000000" points="3926.7886,10421.667,3906.7886,10429.667,3926.7886,10437.667,3918.7886,10429.667" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="275.0234" x="3918.7886" y="10392.3389">shutdownChat(false)</text><polygon fill="#000000" points="4605.2046,10496.6221,4625.2046,10504.6221,4605.2046,10512.6221,4613.2046,10504.6221" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="3894.7886" x2="4617.2046" y1="10504.6221" y2="10504.6221"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="77.7793" x="3908.7886" y="10493.2939">stop()</text><path d="M3904,10540.6221 L3904,10612.6221 A10,10 0 0 0 3914,10622.6221 L4420,10622.6221 A10,10 0 0 0 4430,10612.6221 L4430,10550.6221 L4410,10530.6221 L3914,10530.6221 A10,10 0 0 0 3904,10540.6221 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"/><path d="M4410,10530.6221 L4410,10545.6221 A5,5 0 0 0 4415,10550.6221 L4430,10550.6221 L4410,10530.6221 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="280" x="3916" y="10570.249">&#36830;&#25509;&#36164;&#28304;&#30001;&#26356;&#39640;&#23618;&#32423;&#30340;</text><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="484.1074" x="3916" y="10607.2041">CliController &#22312;&#20250;&#35805;&#32467;&#26463;&#21518;&#31649;&#29702;&#21644;&#20851;&#38381;</text><rect fill="#EEEEEE" height="6" rx="10" ry="10" style="stroke:#EEEEEE;stroke-width:2.0;" width="5920.5161" x="0" y="10679.0098"/><line style="stroke:#000000;stroke-width:2.0;" x1="0" x2="5920.5161" y1="10679.0098" y2="10679.0098"/><line style="stroke:#000000;stroke-width:2.0;" x1="0" x2="5920.5161" y1="10685.0098" y2="10685.0098"/><rect fill="#EEEEEE" height="52.9551" rx="10" ry="10" style="stroke:#000000;stroke-width:4.0;" width="324.1055" x="2798.2053" y="10654.5322"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" font-weight="bold" lengthAdjust="spacing" textLength="287.7656" x="2810.2053" y="10692.1592">7. &#20250;&#35805;&#32467;&#26463; (&#23545;&#26041;&#21457;&#36215;)</text><polygon fill="#000000" points="4595.2046,10768.4424,4615.2046,10776.4424,4595.2046,10784.4424,4603.2046,10776.4424" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="1843.3296" x2="4607.2046" y1="10776.4424" y2="10776.4424"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="546.0137" x="1857.3296" y="10765.1143">(&#21518;&#21488;&#32447;&#31243;) &#25509;&#25910;&#21040; "CHAT_CLOSE_NOTIFY"</text><polygon fill="#000000" points="3926.7886,10833.3975,3906.7886,10841.3975,3926.7886,10849.3975,3918.7886,10841.3975" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="3914.7886" x2="4617.2046" y1="10841.3975" y2="10841.3975"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="676.416" x="3938.7886" y="10830.0693">(Handler) handleMessage("CHAT_CLOSE_NOTIFY")</text><line style="stroke:#000000;stroke-width:2.0;" x1="3904.7886" x2="3998.7886" y1="10896.3525" y2="10896.3525"/><line style="stroke:#000000;stroke-width:2.0;" x1="3998.7886" x2="3998.7886" y1="10896.3525" y2="10922.3525"/><line style="stroke:#000000;stroke-width:2.0;" x1="3916.7886" x2="3998.7886" y1="10922.3525" y2="10922.3525"/><polygon fill="#000000" points="3936.7886,10914.3525,3916.7886,10922.3525,3936.7886,10930.3525,3928.7886,10922.3525" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="275.0234" x="3928.7886" y="10885.0244">shutdownChat(false)</text><polygon fill="#000000" points="4595.2046,10989.3076,4615.2046,10997.3076,4595.2046,11005.3076,4603.2046,10997.3076" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="3904.7886" x2="4607.2046" y1="10997.3076" y2="10997.3076"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="77.7793" x="3918.7886" y="10985.9795">stop()</text><polygon fill="#000000" points="134,11054.2627,114,11062.2627,134,11070.2627,126,11062.2627" style="stroke:#000000;stroke-width:2.0;"/><line style="stroke:#000000;stroke-width:2.0;" x1="122" x2="3872.7886" y1="11062.2627" y2="11062.2627"/><text fill="#000000" font-family="Microsoft YaHei" font-size="28" lengthAdjust="spacing" textLength="284.6758" x="146" y="11050.9346">&#26174;&#31034; "&#23545;&#26041;&#24050;&#36864;&#20986;&#32842;&#22825;"</text><!--SRC=[jLfxRzHM5l_Vd-Bkz8_EI30KQ7UbIAp41Y8Y1OWWNQdQNI4pSoUnyDXJsqD2Lok5Hq828HDeW9OaGBf12GKoF4eU4qY-p5pR-HQzBzltUkp996gHIkthSy_x_CwvTx2lQ4P5jTGokAmMhWnQPjKeTfkwQO7X8Ss1YXr-7rADuh2bEGuqG4dLRV5R4PRKgkxqc8PpJYr3S5OhMAPjbXpmdNe6QicK5xKV83ZwjV2HIxSCQ86ZNmaVx26rQ0vhnY2NB7w2trUXKO3Wlme09otB76RgV_4L_OCN-xGIxDCC-0_JAa8hzMlC_2zww1zCqQzQZbRGAghX9BCG2JhX4Xb_dEXSS4nBNFgVeZYQeqFGVwp_KlUGwbowUCrsO1aS1kxp3RHp4zrvvj_yx3vUGuqQcjjMb2y1gjreRapxesDezKbpSr9H2LFWpQwu4-j0jS6tDhIKIgG2o63cXFV9IaNN2ggZcKQ649vLDKCcFALPa72xzgsZwJObmalqHIRirhLkR8PbwZgqA5tqAbEUWywmQLs96EA518QSxAngg8ES8rx2hp6vs8mBi6BQ6j6I2UPBCk5PQ5HFQNP5LnaLUPSfUerArJc34psmW2x4n9c6WHs27IOIabN-BfCJp__RoBhphz7yMnQG7DtHPnPKlJKkdDxVcVTMxehq5s3PT63h1cBhHMZRGGJvSznqsyPEl0Yjgre1CkljGVuga_PeEXomLCCkGKka9-k96xhDSXbRdb6K4oV0qJpmFcnvMy_Gn09Qlekc7e4J9nIYDJZyTvfTNG3DrD6T5TIOnUQHJDMkgWvacKV-8eH1XdM1WWNnrp09UqldJEVqY6OxTZQ3CS7GJRLePt8Hdp0vWmTmE9JixyoYkQVUre_kqtcb25ltX0f4gTi533WCfEJEvlDvGQAGvj5ZdCaWTFfDo-cnp3BnHZONeoMBNS2jpNXB3N_xHpJsmdjLHxN_XxuJcOa4gBQkn7YnAc6AoqMKhM0T1DLvFGcku2jnItX1SMT85PUrlzSlLLHdI7H9K831Wyn4CpJdbEgebrKROay8uiEDxLr9Y-UCQJi6RZVSg1OVy0p2v26bR3gBUV10yqJoCisMviQMEzz0C_TYNk89awwc3Prg9Qpox13NePF4aPIdB7eh9uj52rVnGKpexSVOWnP64osG9OVwiaXBcXy2MkKGOCuMGnPPaPerjdgLGbTM3_Zd54KtpGh0xlLhy-ZUGxJzgpTTnmqH09aBWMbS6Jzjuye8gHFen0hQ7PrqxxvqLnRHfnh87isZsltTqUlWMDwTVk7Ehe7Z-TtHKNIxaQDyqakCyL6WKKonM5Yb04Omy9YQ1qmEKu0n8JYOn259ED-HEPO1MP5JhaswOO24sbLurYnAQPwQOw9RHHdClo3hlPb4ssD7M0RbsgfvD1EG-pjFCQySSyDbt0k4LJoWkBL5T_9kp2RYc6JyiXtSPqZFmOdZQ6LeLXEmAtdhiAhXESkAcZNs2VlMKYDezHVSP0cOhhzdckwDXu4OxdJI-V6CUWNoFfjjLLFL7S3CToTcy0GNE05DyAa08mpBnXGrMI1GVTDzj1dke1jQjMqjZj2bE9LRj0sBCe_XXloVOILJ9ubt9nAZUKM0aYfdBa99wrOfEXDpQAi1X2c7RhYCnu8hs2Tpk4ZzwtVGqilcfoT-VK61-7p07OsMtlc_lG1PVsqC3ylkn2Dt_bVcyGuS3OoghWEowSuS1WhqwGRQsEZOU8v5jBXsPt_sw_Ncpg9xdS6RWVq2B6rmo15w38UrZf16H5nQQOKyO9cBNUMzmWN6y4ueiFqY3obfYKdRHcSKEuOTOL3cmqHydcwThiB9kWqhYC7YigxPGrB9Am8DsKBdUTfL_wdgMf6-PZD-VPt1FQkke5sAKoKx2D2_WuI9P0TTLemHst0W-U5Sjqy5-C3OgWHjjEZjWbz_oD84Wy_yA5fwSjnzlHWMeAXd01S5vim1awEmNBL9TK1mZWbXE4SNMwjDr3s1EBd6nCAFRQ9bpsk0bds2t9ZWtlEdHmgmuWIGqbvkp44I9zRbll6M7p1TS0sJ_vHsUohGAfbMESHYmRLfgPyKeFtX-TvpVugOFx_FnPDvNurEL7bVVIVa9vokOv9YNoHfYPr3FBgZrQVDxRjnbc9S4_eLQLC7yXdjMPrxAYnotRIX19lxxljxk2HHCSaBBMql_AH4Y88UJ8cfbT1t-OWG7LFv0kifabdYDC6V9GxaZCglDcpk4h5nknzMqFYKEpdgpa-YMXt72Tt_tDnQmZ534u_znPMukQAy5ANfl9jjewUuJzpeJY-ZYJLtuQQtlDLiBANC2W96ahb6oBazPZ1xo1mcfnjoPCW6boxyoB_NG9EY2e57CheSpmCskFaxC_xY53aZh4tWGGajtV9cngN99N14Mh0qt55_W0dNLsGEIDf4p28vSaQpwJr6hgsiw32BGLNS5XjNMcy-H9aS8kZ4YgR7KUrzuks785SS9TaEvY4b8RSIpMGtQ1onWnahfqH10sP9o38sS6FWygRVDXlZGDv83hPuoF2Ut2AaKpiOcT3usExD5U_T5WSx75kQ4Q8oqMKZAqtvFfAuy10eIu84bmetbMayWyg9rk8K_D9nPXhLtdgD7OBGS_VHpEjMPwQ82_rfLGqIfpuyL2Mb31ssU82ZAurWreuIWGvyJ3h8D3y_Hoy-_oKJHoF9HkpO0JZY1Bqtt1G3345_iYwxH9mREc4cm7pGUo8c_nhexlzFJFda5Y4h8TyB1Ihm-CSK24iYtZrIrWNhOqqbB1A2Er-7LpGq0XXtE7o7k1EPAmOXAsPG3eHzcgTHaXgoxM42P8D4fx-iwJ0X4ktWI8G5a65Zmiak4COYmV2K74z9JUOFa3ao1FLAfZCOPfRmhfdbMnFi41i6cWyx9scRpOqtxhCNxkGssbnp9vTnJs0Z9Lx0dPKInek4oyDdm15Og3emYqyj3ixjU2OnCjxhw7CBlZ95DbRHdPUjumhRpWOsFAArqKWE3YRsdd5_PjAoCYrHly69-kXsSskj-Uav3epxyJfEFF4tbRImbN0Z14T8apxYc4VAryXxtXbn3XXAoWxZz1vfITflUZpIUexxXXRUvAOxTLja4VMIKARuLNWEP4jeIHQmwWa-oCaCmreGNjgYPKzlt-ckP7xfFwd4c4lg-lKjL7l48eqpdpLXGj5hbCnsQb4RIvpm86hi0SOoUJp2R9pXuxWWItHgR3a8NcB2VycJdMCpJVO38J5e2T4VWisKwTvL4AiYOlO5Te9EcXZYzHEQo4_TDCGf6PkI6IaxUGe8fqWv2MaqWwp39t3_tM921hNBOpJ-CnbhM10VldNlhUupt-Bf5fkS6MT_lOwsRwKbN7gRb9AB9cscGonEwPq4eVyQ7678xyeBpq2Mdzbhz_sFwxbEe1gEQ0U5PRgrVJAU7WaFiWU5P8550YIBNuNdfF3nVxyZU5FSd0G9QVe9KpXWSpQQUouA0VxebBSruRxvvH0cPxyK1ES4Z3ARxeU7-1G3IfgXwlerW1OUHwQb71Uh3Zdy4h5PAgAzt-Np2JqixCT0Tb3tFzvo6pFUx3jtxhVTLp-XTpUynZ8xVKd_986CKM8MOd3qLXVnA8iUJA6n3xkFtmZMaQpzMpnhsOMRaBNxWrsGwJvpSk1ITz_vYwSldJi_qDlptHy3kQriEyJUFoTUgTZ2_RV-dlsop4w0-vZ3VmS0]--></g></svg>